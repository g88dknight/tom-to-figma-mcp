<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Tom to Figma</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Geist:wght@400;500;600&family=Geist+Mono:wght@400;500&display=swap');

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Geist', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background-color: #000000;
        color: #ffffff;
        padding: 24px;
        line-height: 1.5;
      }

      .container {
        max-width: 100%;
      }

      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        gap: 20px;
      }

      .logo-section {
        flex: 1;
        display: flex;
        justify-content: center;
      }

      .logo {
        width: 150px;
        height: auto;
      }

      .header-buttons {
        display: flex;
        gap: 8px;
        flex-shrink: 0;
      }

      .btn-primary {
        background-color: #1AE7AD;
        border: none;
        color: #000000;
        padding: 8px 20px;
        border-radius: 16px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        font-family: 'Geist', sans-serif;
        transition: background-color 0.2s;
        min-width: 107px;
      }

      .btn-primary:hover:not(:disabled) {
        background-color: #15d199;
      }

      .btn-primary:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }

      .btn-disconnect {
        background-color: transparent;
        border: 1px solid #EE4D6D;
        color: #EE4D6D;
        padding: 8px 20px;
        border-radius: 16px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        font-family: 'Geist', sans-serif;
        transition: all 0.2s;
        min-width: 107px;
      }

      .btn-disconnect:hover:not(:disabled) {
        background-color: rgba(238, 77, 109, 0.1);
      }

      .btn-disconnect:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }

      h2 {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 16px;
        color: #ffffff;
      }

      .section {
        margin-bottom: 32px;
      }

      .how-to-use {
        margin-bottom: 16px;
      }

      .how-to-use h2 {
        font-size: 16px;
        font-weight: 500;
        margin-bottom: 12px;
        letter-spacing: -0.64px;
      }

      .how-to-use-content {
        display: flex;
        gap: 19px;
        font-size: 11px;
        line-height: 15px;
        letter-spacing: -0.33px;
      }

      .how-to-use ol {
        flex: 1;
        margin-left: 16.5px;
        color: white;
        list-style-type: decimal;
      }

      .how-to-use li {
        margin-bottom: 0;
        font-size: 11px;
        line-height: 15px;
      }

      .how-to-use-info {
        width: 156px;
        color: #848484;
        font-size: 11px;
        line-height: 15px;
      }

      .connection-section {
        margin-bottom: 16px;
      }

      .input-group {
        display: flex;
        gap: 10px;
        align-items: start;
        margin-bottom: 16px;
      }

      label {
        display: block;
        font-size: 12px;
        font-weight: 500;
        color: #ffffff;
        width: 130px;
        flex-shrink: 0;
        padding-top: 12px;
        letter-spacing: -0.24px;
        line-height: 15.85px;
      }

      input {
        width: 100%;
        background-color: #1A1A1A;
        border: 1px solid #343434;
        border-radius: 16px;
        padding: 8px 12px;
        font-size: 14px;
        font-weight: 500;
        color: #ffffff;
        font-family: 'Geist', sans-serif;
        transition: border-color 0.2s;
      }

      input:focus {
        outline: none;
        border-color: #1AE7AD;
      }

      input::placeholder {
        color: #4a4a4a;
      }

      input:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .button-group {
        display: flex;
        gap: 8px;
        margin-top: 16px;
      }

      button {
        flex: 1;
        background-color: #1AE7AD;
        border: none;
        color: #000000;
        padding: 10px 16px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        font-family: 'Geist', sans-serif;
        transition: background-color 0.2s;
      }

      button:hover:not(:disabled) {
        background-color: #15d199;
      }

      button.secondary {
        background-color: #1a1a1a;
        color: #ffffff;
        border: 1px solid #2a2a2a;
      }

      button.secondary:hover:not(:disabled) {
        background-color: #2a2a2a;
      }

      button:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }

      .status {
        margin-top: 16px;
        padding: 12px 16px;
        border-radius: 6px;
        font-size: 13px;
        font-weight: 500;
      }

      .status.connected {
        background-color: #0a2f1a;
        color: #1AE7AD;
        border: 1px solid #1AE7AD;
      }

      .status.disconnected {
        background-color: #2f0a0a;
        color: #ef4444;
        border: 1px solid #dc2626;
      }

      .status.info {
        background-color: #0a1a2f;
        color: #3b82f6;
        border: 1px solid #2563eb;
      }

      .hint {
        font-size: 11px;
        color: #848484;
        margin-top: 10px;
        line-height: 13px;
        font-family: 'Geist', sans-serif;
        font-weight: 400;
      }

      .input-wrapper {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      code {
        background-color: #1a1a1a;
        padding: 2px 6px;
        border-radius: 3px;
        font-size: 12px;
        color: #1AE7AD;
      }

      .hidden {
        display: none;
      }

      .progress-container {
        margin-top: 16px;
      }

      .progress-bar-wrapper {
        width: 100%;
        background-color: #1a1a1a;
        border-radius: 4px;
        height: 8px;
        margin-top: 8px;
        overflow: hidden;
      }

      .progress-bar {
        height: 100%;
        background-color: #1AE7AD;
        width: 0%;
        transition: width 0.3s ease;
      }

      .progress-info {
        display: flex;
        justify-content: space-between;
        margin-top: 8px;
        font-size: 12px;
        color: #a0a0a0;
      }

      .operation-complete {
        color: #1AE7AD;
      }

      .operation-error {
        color: #ef4444;
      }

      /* New Design Styles */
      .status-badge {
        display: flex;
        align-items: center;
        gap: 7px;
        padding: 4px 7px;
        border-radius: 47.4px;
        border: 1px solid #EE4D6D;
      }

      .status-badge.connected {
        border-color: #1AE7AD;
      }

      .status-icon {
        width: 14px;
        height: 14px;
      }

      .status-text {
        font-family: 'Geist Mono', monospace;
        font-size: 12px;
        font-weight: 500;
        text-transform: uppercase;
        line-height: 14.22px;
        color: #EE4D6D;
      }

      .status-badge.connected .status-text {
        color: #1AE7AD;
      }

      .divider {
        height: 1px;
        background-color: #282828;
        margin-bottom: 20px;
      }

      .btn-generate {
        background-color: #1A1A1A;
        border: 1px solid #343434;
        border-radius: 76.08px;
        padding: 9.51px;
        min-width: 40px;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
      }

      .btn-generate:hover:not(:disabled) {
        background-color: #2a2a2a;
      }

      .btn-generate svg {
        width: 18px;
        height: 18px;
      }

      .input-with-button {
        display: flex;
        gap: 8px;
      }

      .input-with-button input {
        flex: 1;
      }

      .footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #282828;
      }

      .footer-date {
        font-family: 'Geist Mono', monospace;
        font-size: 11px;
        font-weight: 500;
        text-transform: uppercase;
        color: #ffffff;
      }

      .footer-logo {
        font-size: 11px;
        color: #848484;
      }

      .project-link {
        font-size: 11px;
        color: #1AE7AD;
        text-decoration: none;
        cursor: pointer;
      }

      .project-link:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <div class="status-badge" id="status-badge">
          <svg class="status-icon" id="status-icon-offline" width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_11_479)">
              <path d="M1.16675 1.66699L12.8334 13.3337" stroke="#EE4D6D" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M4.95825 10.1248C5.50346 9.59035 6.23647 9.29102 6.99992 9.29102C7.76336 9.29102 8.49638 9.59035 9.04159 10.1248" stroke="#EE4D6D" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M1.16675 5.64544C1.88656 4.99925 2.70854 4.47689 3.59925 4.09961" stroke="#EE4D6D" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6.21826 3.41685C8.55743 3.20685 10.9666 3.94185 12.8333 5.61019" stroke="#EE4D6D" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9.8291 7.0625C10.3044 7.32719 10.7402 7.65705 11.1241 8.0425" stroke="#EE4D6D" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M2.91675 8.08363C3.7497 7.25064 4.81533 6.68935 5.97341 6.47363" stroke="#EE4D6D" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M7 12.167H7.00583" stroke="#EE4D6D" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
            </g>
            <defs>
              <clipPath id="clip0_11_479">
                <rect width="14" height="14" fill="white" transform="translate(0 0.5)"/>
              </clipPath>
            </defs>
          </svg>
          <svg class="status-icon hidden" id="status-icon-online" width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.91675 8.08352C4.00717 7.01469 5.47319 6.41602 7.00008 6.41602C8.52697 6.41602 9.993 7.01469 11.0834 8.08352" stroke="#1AE7AD" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M4.95825 10.1248C5.50346 9.59035 6.23647 9.29102 6.99992 9.29102C7.76336 9.29102 8.49638 9.59035 9.04159 10.1248" stroke="#1AE7AD" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M1.16675 5.64513C2.77098 4.21026 4.84778 3.41699 7.00008 3.41699C9.15238 3.41699 11.2292 4.21026 12.8334 5.64513" stroke="#1AE7AD" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M7 12.167H7.00583" stroke="#1AE7AD" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="status-text" id="status-text">offline</span>
        </div>

        <div class="logo-section">
          <svg class="logo" width="168" height="75" viewBox="0 0 168 75" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M135.607 1.13678C143.873 -0.44584 143.873 -0.446113 147.126 1.57995L148.412 2.3686C149.78 3.25587 150.885 4.03396 148.986 5.16841C147.571 5.70943 146.155 6.05062 144.676 6.35342L143.779 6.54331C142.822 6.74576 141.863 6.94463 140.904 7.14323C140.24 7.28268 139.575 7.42238 138.911 7.56227C137.605 7.83683 136.299 8.11006 134.993 8.38203C133.581 8.67625 132.171 8.9762 130.762 9.2806C125.065 10.5064 119.335 11.5362 113.597 12.5515L114.136 13.0467L114.821 13.7129L115.51 14.3664C117.21 16.884 112.717 19.9253 111.056 21.4962C110.07 22.4428 109.189 23.6971 108.317 24.7491L107.534 25.6153C105.321 28.3377 105.297 28.0426 103.649 31.1149C104.675 29.7393 105.705 28.8673 106.639 27.5928C107.826 26.1427 109.088 24.8002 110.398 23.4611C111.126 22.6697 111.852 21.8775 112.575 21.0821C113.161 20.5038 113.023 20.2423 113.566 20.1975C113.633 19.9217 113.839 19.907 113.909 19.6229C123.654 10.2057 123.654 10.2058 127.13 14.1651L127.753 14.745C129.823 16.7223 128.635 18.7966 128.225 20.6915C128.728 19.9193 129.173 19.2614 131.151 17.0848C137.67 10.5662 137.67 10.5662 141.147 13.3509C142.232 14.4789 143.636 17.6367 140.582 21.2446L140.442 21.4095C136.788 25.7255 131.261 32.4289 122.858 47.862C122.346 48.8024 121.084 48.9002 120.541 48.945C118.722 44.4792 121.856 33.9961 124.572 29.781C121.107 31.9517 118.053 36.0476 116.292 39.1014C114.188 42.9368 113.211 44.5355 110.543 41.1065C109.052 38.5007 110.575 33.9557 111.056 31.1149C108.965 33.2264 105.881 36.7433 104.217 39.2081C103.623 40.0808 103.006 40.9345 102.388 41.7901L102.384 41.7948C100.972 44.1531 100.08 46.0075 99.1578 48.3637C98.8941 49.0281 98.6297 49.6926 98.3654 50.3568L97.9623 51.3723C97.1506 53.3278 96.142 55.3792 94.1468 53.2811C91.3722 48.6065 92.218 43.5604 94.1608 38.7216C92.4534 40.0512 90.7963 41.4321 89.1488 42.835C88.4163 43.4538 87.6748 44.0575 86.9274 44.658C85.5791 45.8122 84.3993 47.0563 83.2005 48.3605L82.2081 49.3806C81.3883 50.2272 80.5871 51.0848 79.789 51.9515C76.2921 55.6935 73.2562 57.2774 71.1583 51.5374C70.9732 50.3655 71.0072 49.2764 71.0264 48.0851C71.1039 46.6769 71.1037 46.6768 70.6645 45.5729C70.3969 43.4825 70.1646 41.3918 70.4528 39.2951C70.797 38.1032 70.7968 38.1032 70.0588 38.2529L69.6053 39.382C69.1022 40.1102 68.5845 40.8284 68.0579 41.5398L67.2156 42.6832C66.7393 43.309 66.252 43.9273 65.7426 44.5266C65.1882 45.1807 64.7191 45.8442 64.252 46.5622C63.5748 47.5823 62.8717 48.5669 62.1228 49.5359C60.9551 51.0495 59.8689 52.6104 58.7999 54.1945L57.9319 55.4775C56.7709 57.3128 55.7404 59.2116 54.714 61.1245C50.8185 68.3074 50.8185 68.3073 48.4275 64.3308L47.8538 63.3886C47.606 61.4236 48.6703 59.9423 49.5631 58.2319C49.8027 57.6972 50.0381 57.1603 50.2674 56.6212C53.2363 49.8883 57.5855 43.6913 61.6646 37.5974C63.9986 34.0762 66.1554 30.4806 68.0074 26.6843L68.4134 25.9323C70.7444 21.5566 70.2388 18.7107 64.8668 18.6504C63.6509 18.73 62.4458 18.8497 61.235 18.9857C60.3482 19.072 59.4612 19.1574 58.5741 19.2416L57.2358 19.3722C55.2601 19.5524 53.2834 19.6712 51.3022 19.7712L50.2756 19.8299C47.0241 19.9891 42.1904 17.4942 42.8508 13.4733C45.0045 12.789 47.1648 12.4744 49.4091 12.2328L50.3829 12.1226C51.4481 12.0026 52.514 11.8861 53.5796 11.7695C54.3385 11.6849 55.0975 11.6 55.8564 11.5151C58.3712 11.2348 60.8867 10.9599 63.4022 10.6863L64.774 10.5371C69.3998 10.0346 74.0259 9.53553 78.6525 9.04098C80.3655 8.85783 82.0787 8.67421 83.7917 8.4905C84.6653 8.39695 85.5393 8.30376 86.4129 8.21075C92.0051 7.61499 97.5879 6.98077 103.161 6.22983L104.182 6.09344C114.695 4.68286 125.194 3.1717 135.607 1.13678ZM93.8561 21.8227C90.1471 22.1287 86.4484 25.8648 84.0066 28.3675L83.2665 29.0514C80.3023 32.1267 74.0222 42.4702 75.9822 47.0449C78.6455 45.6798 78.6458 45.6796 80.0584 43.4332L80.8505 43.095C81.4363 42.3287 82.0085 41.5519 82.5724 40.7694C83.1839 39.9999 83.7982 39.2324 84.4155 38.4675C86.347 36.0436 88.0541 33.5566 89.6469 30.8997C90.0155 30.2864 90.3901 29.6762 90.7685 29.0689C93.0381 25.6686 93.0383 25.6685 93.8561 21.8227ZM110.926 13.3178C110.867 12.6114 104.037 13.7157 101.858 14.068C101.593 14.1108 101.397 14.1424 101.29 14.1585C98.7875 14.532 96.2827 14.8819 93.7759 15.2141C93.8896 15.2325 94.0011 15.2575 94.1107 15.2888C95.4792 15.6794 96.5631 17.0636 98.2933 19.273L98.9874 20.0178C99.961 21.4817 100.026 22.8968 99.8288 24.6057C100.842 23.9911 101.318 23.4996 102.055 22.5966C103.111 21.3265 104.22 20.142 105.377 18.9619C106.203 18.0567 107.026 17.149 107.846 16.2385C108.248 15.8218 108.446 15.6167 108.658 15.4263C108.864 15.2416 109.082 15.0706 109.511 14.7342C109.93 14.4827 110.114 14.3715 110.174 14.2134C110.221 14.0882 110.19 13.9332 110.134 13.656L110.926 13.3178ZM91.6709 15.4889C88.6029 15.8835 85.5318 16.2542 82.4572 16.6111C81.6241 16.7084 80.7912 16.8076 79.9584 16.9077C78.9634 17.0262 77.9675 17.1397 76.9712 17.2473L75.6827 17.3997L74.5625 17.5239C73.0914 17.9625 74.577 19.5472 75.5229 20.5563C75.7261 20.773 75.9044 20.9635 76.0231 21.11L76.6559 22.1496C78.0829 21.7403 78.196 21.5585 78.8762 20.465L78.9351 20.3708L78.9657 20.3211C80.6198 20.1847 80.0325 22.0411 79.7353 22.9804L79.7333 22.9877L80.4341 22.5003C86.2 18.5151 89.4525 16.2669 91.6709 15.4889Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M24.3995 29.5184C24.9183 29.5184 25.3736 29.6364 25.765 29.8723C26.1655 30.1083 26.4521 30.4262 26.625 30.8256V29.6819H28.0176V36.3528C28.0175 36.9517 27.8811 37.4554 27.6081 37.8638C27.3442 38.2813 26.9617 38.5943 26.4611 38.8031C25.9696 39.0209 25.3825 39.1299 24.6999 39.1299C24.1265 39.1299 23.6214 39.0435 23.1846 38.8711C22.7477 38.6987 22.388 38.4536 22.1058 38.136C21.8237 37.8274 21.6325 37.4644 21.5324 37.0469L23.0344 36.9515C23.1345 37.2511 23.3074 37.4872 23.5532 37.6596C23.808 37.8411 24.1903 37.9318 24.6999 37.9318C25.3006 37.9318 25.7605 37.8047 26.0791 37.5506C26.4067 37.2965 26.5705 36.9108 26.5705 36.3935V35.3452C26.3975 35.7173 26.1198 36.0123 25.7376 36.2301C25.3553 36.4479 24.9276 36.5569 24.4543 36.5569C23.8446 36.5569 23.3029 36.4071 22.8296 36.1077C22.3564 35.8082 21.9877 35.3952 21.7238 34.8688C21.4598 34.3424 21.3277 33.7341 21.3277 33.0444C21.3277 32.3456 21.4552 31.7329 21.71 31.2065C21.974 30.6802 22.3381 30.2672 22.8022 29.9677C23.2755 29.6683 23.8079 29.5185 24.3995 29.5184ZM24.6862 30.7439C24.0946 30.7439 23.635 30.9525 23.3073 31.37C22.9888 31.7784 22.8296 32.3322 22.8296 33.031C22.8297 33.7389 22.9934 34.3016 23.321 34.7191C23.6578 35.1274 24.1129 35.3315 24.6862 35.3315C25.2505 35.3315 25.7012 35.1275 26.0379 34.7191C26.3838 34.3107 26.5613 33.7479 26.5705 33.031C26.5796 32.5591 26.5068 32.155 26.352 31.8192C26.1973 31.4744 25.9743 31.2112 25.683 31.0297C25.4009 30.8391 25.0685 30.7439 24.6862 30.7439Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.91211 29.5184C8.60383 29.5185 9.20905 29.6774 9.72784 29.9951C10.2467 30.3036 10.6472 30.7392 10.9294 31.3019C11.2116 31.8646 11.3526 32.5317 11.3526 33.3032C11.3526 34.0656 11.2115 34.7327 10.9294 35.3045C10.6472 35.8762 10.2467 36.3164 9.72784 36.625C9.20906 36.9335 8.60381 37.0879 7.91211 37.0879C7.22036 37.0879 6.61491 36.9336 6.09609 36.625C5.57728 36.3164 5.1767 35.8762 4.89454 35.3045C4.61238 34.7327 4.47138 34.0656 4.47138 33.3032C4.47138 32.5318 4.61239 31.8646 4.89454 31.3019C5.1767 30.7392 5.57731 30.3036 6.09609 29.9951C6.61491 29.6774 7.22036 29.5184 7.91211 29.5184ZM7.91211 30.7709C7.30227 30.7709 6.8243 30.9979 6.47842 31.4517C6.14165 31.8964 5.97331 32.5136 5.97331 33.3032C5.97331 34.0928 6.14165 34.7146 6.47842 35.1684C6.8243 35.613 7.3023 35.8355 7.91211 35.8355C8.53095 35.8354 9.00876 35.613 9.34551 35.1684C9.68228 34.7146 9.85062 34.0928 9.85062 33.3032C9.85062 32.5136 9.68229 31.8964 9.34551 31.4517C9.00875 30.9979 8.53099 30.7709 7.91211 30.7709Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M43.0967 29.5184C44.0797 29.5184 44.8261 29.7818 45.3359 30.3083C45.8546 30.8256 46.1142 31.5561 46.1142 32.5V36.9245H44.8307L44.7911 35.7578C44.7092 35.9389 44.5953 36.1055 44.4484 36.2574C44.2027 36.5115 43.8933 36.7158 43.5201 36.8701C43.1561 37.0153 42.7601 37.0879 42.3323 37.0879C41.5768 37.0879 40.9714 36.9155 40.5163 36.5706C40.0703 36.2257 39.8472 35.7399 39.8472 35.1137C39.8473 34.4875 40.034 34.002 40.4072 33.6571C40.7895 33.3032 41.3765 33.0489 42.1684 32.8946L44.6668 32.4183C44.6668 31.8556 44.535 31.4381 44.2711 31.1658C44.0071 30.8845 43.6155 30.7439 43.0967 30.7439C42.6325 30.7439 42.2684 30.848 42.0045 31.0568C41.7405 31.2564 41.5587 31.556 41.4585 31.9553L39.9703 31.86C40.1069 31.134 40.4436 30.5623 40.9805 30.1448C41.5266 29.7274 42.232 29.5185 43.0967 29.5184ZM42.537 33.9159C42.1002 33.9976 41.7908 34.1291 41.6087 34.3105C41.4358 34.4829 41.3492 34.7054 41.3492 34.9776C41.3492 35.2862 41.4539 35.5266 41.6633 35.6991C41.8817 35.8624 42.1821 35.9442 42.5644 35.9442C43.0012 35.9442 43.3743 35.8624 43.6837 35.6991C43.9932 35.5266 44.2346 35.2908 44.4076 34.9913C44.5805 34.6918 44.6668 34.3514 44.6668 33.9703V33.5073L42.537 33.9159Z" fill="white"/>
            <path d="M2.55299 29.6819H4.47809V30.8663H2.55299V34.8552C2.553 35.1909 2.62587 35.4222 2.77143 35.5493C2.91705 35.6764 3.14011 35.7401 3.44044 35.7401H4.47809V36.9245H3.12635C2.43466 36.9245 1.92495 36.7655 1.5973 36.4479C1.26966 36.1302 1.10589 35.6355 1.10589 34.9639V30.8663H0V29.6819H1.10589V27.9801H2.55299V29.6819Z" fill="white"/>
            <path d="M18.7397 28.4431H17.6475C17.3654 28.4431 17.1559 28.5203 17.0194 28.6745C16.8829 28.8197 16.8146 29.0284 16.8146 29.3006V29.7773H18.6304V30.948H16.8146V36.9245H15.3672V30.948H14.357V29.7773H15.3672V29.2189C15.3672 28.62 15.5359 28.1436 15.8726 27.7896C16.2094 27.4357 16.7372 27.2587 17.4562 27.2586H18.7397V28.4431Z" fill="white"/>
            <path d="M20.6846 36.9245H19.2375V29.6819H20.6846V36.9245Z" fill="white"/>
            <path d="M36.8708 29.5184C37.3805 29.5185 37.8128 29.6275 38.1677 29.8453C38.5318 30.054 38.8049 30.3625 38.9869 30.7709C39.1781 31.1793 39.2736 31.6786 39.2736 32.2685V36.9245H37.8265V32.6224C37.8265 31.9962 37.7125 31.5242 37.485 31.2065C37.2574 30.8889 36.9115 30.7302 36.4473 30.7302C36.147 30.7302 35.8831 30.8074 35.6555 30.9617C35.428 31.116 35.2504 31.3384 35.123 31.6288C35.0047 31.9191 34.9457 32.2685 34.9457 32.6768V36.9245H33.5665V32.6768C33.5665 32.0597 33.4618 31.5833 33.2525 31.2475C33.0522 30.9027 32.7063 30.7302 32.2148 30.7302C31.9054 30.7302 31.6368 30.8074 31.4093 30.9617C31.1909 31.116 31.0179 31.3427 30.8905 31.6421C30.7631 31.9325 30.6995 32.2775 30.6995 32.6768V36.9245H29.2524V29.6819H30.5767L30.6044 30.9122C30.6781 30.7254 30.7687 30.5556 30.8771 30.4033C31.0864 30.1221 31.3411 29.9042 31.6415 29.7499C31.9418 29.5956 32.2696 29.5184 32.6246 29.5184C33.2435 29.5184 33.7485 29.6955 34.1399 30.0494C34.4262 30.3017 34.6341 30.6247 34.7646 31.0178C34.8408 30.7902 34.9374 30.5898 35.0548 30.417C35.255 30.1266 35.51 29.9042 35.8194 29.7499C36.1289 29.5957 36.4794 29.5184 36.8708 29.5184Z" fill="white"/>
            <path d="M20.7121 28.6335H19.2101V27.1906H20.7121V28.6335Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.91211 18.5007C8.60383 18.5007 9.20905 18.6596 9.72784 18.9773C10.2467 19.2859 10.6472 19.7214 10.9294 20.2841C11.2116 20.8468 11.3526 21.514 11.3526 22.2854C11.3526 23.0478 11.2115 23.7149 10.9294 24.2867C10.6472 24.8584 10.2467 25.2986 9.72784 25.6072C9.20906 25.9157 8.60381 26.0701 7.91211 26.0702C7.22036 26.0702 6.61491 25.9158 6.09609 25.6072C5.57728 25.2986 5.1767 24.8585 4.89454 24.2867C4.61238 23.7149 4.47138 23.0478 4.47138 22.2854C4.47138 21.514 4.61239 20.8468 4.89454 20.2841C5.1767 19.7214 5.57731 19.2859 6.09609 18.9773C6.61491 18.6596 7.22036 18.5007 7.91211 18.5007ZM7.91211 19.7531C7.30227 19.7531 6.8243 19.9801 6.47842 20.4339C6.14165 20.8786 5.97331 21.4958 5.97331 22.2854C5.97331 23.075 6.14165 23.6968 6.47842 24.1506C6.8243 24.5953 7.3023 24.8177 7.91211 24.8177C8.53095 24.8177 9.00876 24.5952 9.34551 24.1506C9.68228 23.6968 9.85062 23.075 9.85062 22.2854C9.85062 21.4958 9.68229 20.8786 9.34551 20.4339C9.00875 19.9801 8.53099 19.7532 7.91211 19.7531Z" fill="white"/>
            <path d="M2.55299 18.6641H4.47809V19.8485H2.55299V23.8374C2.553 24.1731 2.62587 24.4045 2.77143 24.5315C2.91705 24.6586 3.14011 24.7223 3.44044 24.7223H4.47809V25.9067H3.12635C2.43466 25.9067 1.92495 25.7477 1.5973 25.4301C1.26966 25.1124 1.10589 24.6177 1.10589 23.9462V19.8485H0V18.6641H1.10589V16.9623H2.55299V18.6641Z" fill="white"/>
            <path d="M19.6143 18.5007C20.1241 18.5007 20.5566 18.6097 20.9115 18.8275C21.2756 19.0363 21.5487 19.3448 21.7307 19.7531C21.9219 20.1615 22.0174 20.6608 22.0174 21.2507V25.9067H20.57V21.6046C20.57 20.9784 20.4564 20.5064 20.2288 20.1887C20.0013 19.8711 19.6554 19.7124 19.1912 19.7124C18.8908 19.7124 18.6269 19.7896 18.3994 19.9439C18.1718 20.0982 17.9943 20.3206 17.8669 20.611C17.7486 20.9014 17.6893 21.2507 17.6892 21.659V25.9067H16.3104V21.659C16.3104 21.0419 16.2056 20.5655 15.9963 20.2297C15.796 19.8849 15.4502 19.7124 14.9586 19.7124C14.6492 19.7124 14.3807 19.7896 14.1531 19.9439C13.9348 20.0982 13.7617 20.3249 13.6343 20.6244C13.5069 20.9148 13.4433 21.2597 13.4433 21.659V25.9067H11.9959V18.6641H13.3202L13.3482 19.8947C13.422 19.7078 13.5122 19.5379 13.6206 19.3856C13.83 19.1042 14.0849 18.8864 14.3853 18.7321C14.6857 18.5779 15.0134 18.5007 15.3684 18.5007C15.9873 18.5007 16.4924 18.6777 16.8837 19.0317C17.17 19.2839 17.3777 19.6067 17.5081 19.9997C17.5843 19.7722 17.6812 19.572 17.7986 19.3992C17.9988 19.1088 18.2536 18.8864 18.563 18.7321C18.8724 18.5779 19.223 18.5007 19.6143 18.5007Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M21.7733 40.5362C22.4833 40.5362 23.0657 40.7133 23.5208 41.0672C23.985 41.4121 24.3263 41.8704 24.5448 42.4421C24.7723 43.0139 24.8863 43.6403 24.8863 44.321C24.8863 45.0016 24.7723 45.6278 24.5448 46.1995C24.3263 46.7713 23.985 47.2344 23.5208 47.5884C23.0657 47.9332 22.4832 48.1057 21.7733 48.1057C21.4093 48.1057 21.068 48.042 20.7494 47.915C20.4308 47.7879 20.1577 47.6108 19.9302 47.384C19.8108 47.255 19.7111 47.1136 19.6298 46.9603V49.9843H18.1827V40.6997H19.5478L19.5767 41.8067C19.7582 41.448 20.0081 41.1653 20.3262 40.9585C20.7449 40.6771 21.2272 40.5362 21.7733 40.5362ZM21.5138 41.7887C21.1316 41.7887 20.7994 41.884 20.5172 42.0745C20.2351 42.2561 20.0167 42.5376 19.8619 42.9187C19.7072 43.2999 19.6298 43.7673 19.6298 44.321C19.6298 44.8746 19.7026 45.342 19.8482 45.7232C20.003 46.1043 20.2214 46.3902 20.5035 46.5808C20.7948 46.7623 21.1315 46.8532 21.5138 46.8532C22.0963 46.8532 22.5515 46.6308 22.8792 46.1862C23.216 45.7414 23.3843 45.1196 23.3843 44.321C23.3843 43.5223 23.216 42.9005 22.8792 42.4558C22.5515 42.0111 22.0963 41.7887 21.5138 41.7887Z" fill="white"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M135.013 40.8884C136.052 40.8884 136.837 41.1526 137.366 41.6805C137.904 42.1994 138.173 42.946 138.173 43.92V48.3448H136.668L136.609 47.1414C136.526 47.3296 136.414 47.5034 136.271 47.662C136.043 47.9259 135.747 48.1353 135.382 48.2901C135.018 48.4357 134.607 48.5085 134.151 48.5085C133.394 48.5085 132.783 48.3356 132.318 47.9897C131.853 47.6347 131.62 47.1431 131.62 46.515C131.62 45.8869 131.816 45.3949 132.208 45.0398C132.601 44.6848 133.198 44.4298 134.001 44.275L136.422 43.7972C136.422 43.2784 136.303 42.8916 136.066 42.6367C135.829 42.3727 135.478 42.2403 135.013 42.2403C134.593 42.2403 134.26 42.3405 134.014 42.5407C133.777 42.7319 133.613 43.0097 133.522 43.3738L131.743 43.2921C131.889 42.5183 132.245 41.9265 132.81 41.5168C133.376 41.098 134.11 40.8884 135.013 40.8884ZM134.534 45.3678C134.142 45.4498 133.859 45.5727 133.686 45.7366C133.522 45.8913 133.44 46.0959 133.44 46.3507C133.44 46.6329 133.531 46.8514 133.713 47.0062C133.905 47.1609 134.174 47.2385 134.52 47.2386C134.912 47.2385 135.25 47.161 135.533 47.0062C135.815 46.8514 136.034 46.6375 136.189 46.3644C136.344 46.0913 136.422 45.7681 136.422 45.3949V44.9852L134.534 45.3678Z" fill="white"/>
            <path d="M140.638 48.3448H138.887V41.0524H140.638V48.3448Z" fill="white"/>
            <path d="M14.4319 40.5362C15.0236 40.5362 15.547 40.6407 16.0021 40.8494C16.4663 41.0491 16.8393 41.3441 17.1214 41.7343C17.4127 42.1246 17.5995 42.6012 17.6814 43.1639L16.1657 43.2453C16.0929 42.7734 15.9018 42.415 15.5924 42.1699C15.2829 41.9158 14.8961 41.7887 14.4319 41.7887C13.8221 41.7887 13.3441 42.0157 12.9983 42.4695C12.6615 42.9142 12.4931 43.5314 12.4931 44.321C12.4932 45.1106 12.6615 45.7324 12.9983 46.1862C13.3441 46.6308 13.8221 46.8532 14.4319 46.8532C14.8961 46.8532 15.2829 46.7261 15.5924 46.472C15.9018 46.2088 16.0929 45.814 16.1657 45.2876L17.6814 45.3693C17.5994 45.9229 17.4127 46.4038 17.1214 46.8122C16.8393 47.2206 16.4663 47.5383 16.0021 47.7652C15.547 47.9921 15.0236 48.1057 14.4319 48.1057C13.7402 48.1057 13.1347 47.9513 12.6159 47.6428C12.0972 47.3342 11.6968 46.894 11.4147 46.3222C11.1325 45.7505 10.9912 45.0833 10.9912 44.321C10.9912 43.5586 11.1325 42.8961 11.4147 42.3334C11.6968 41.7616 12.0972 41.3214 12.6159 41.0128C13.1347 40.6952 13.7402 40.5362 14.4319 40.5362Z" fill="white"/>
            <path d="M7.95965 40.5362C8.46937 40.5362 8.90187 40.6453 9.25685 40.8631C9.62087 41.0718 9.89404 41.3803 10.0761 41.7887C10.2672 42.1971 10.3627 42.6964 10.3627 43.2863V47.9423H8.91534V43.6402C8.91534 43.014 8.80168 42.542 8.57413 42.2243C8.34658 41.9067 8.00065 41.748 7.53648 41.748C7.23613 41.748 6.97223 41.8252 6.74469 41.9795C6.51714 42.1337 6.33959 42.3561 6.21216 42.6466C6.09386 42.9369 6.03456 43.2863 6.03455 43.6946V47.9423H4.65569V43.6946C4.65568 43.0775 4.55092 42.6011 4.3416 42.2653C4.14135 41.9204 3.79547 41.748 3.30396 41.748C2.9945 41.748 2.726 41.8252 2.49845 41.9795C2.28005 42.1337 2.10705 42.3605 1.97963 42.6599C1.85222 42.9503 1.78862 43.2953 1.78861 43.6946V47.9423H0.341215V40.6997H1.66554L1.69354 41.9294C1.76721 41.7428 1.85766 41.5732 1.96593 41.4211C2.17527 41.1398 2.43024 40.922 2.7306 40.7677C3.03095 40.6134 3.35874 40.5362 3.71371 40.5362C4.33258 40.5362 4.83769 40.7133 5.22905 41.0672C5.51529 41.3194 5.72299 41.6423 5.85345 42.0353C5.92964 41.8077 6.02653 41.6076 6.14392 41.4348C6.34414 41.1444 6.59888 40.922 6.9083 40.7677C7.21776 40.6134 7.56828 40.5362 7.95965 40.5362Z" fill="white"/>
            <path d="M140.679 40.0829H138.859V38.5259H140.679V40.0829Z" fill="white"/>
          </svg>
        </div>

        <div class="header-buttons">
          <button id="btn-connect" class="btn-primary">Connect</button>
          <button id="btn-disconnect" class="btn-disconnect hidden">Disconnect</button>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Connection Settings -->
      <div class="section connection-section">
        <!-- Channel Name - First -->
        <div class="input-group">
          <label for="channel-name">Channel Name</label>
          <div class="input-wrapper">
            <div class="input-with-button">
              <input
                type="text"
                id="channel-name"
                placeholder="default"
                value=""
              />
              <button id="btn-generate-channel" class="btn-generate">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clip-path="url(#clip0_11_438)">
                    <path d="M12.3495 5.625C11.7322 3.17775 10.464 1.5 9 1.5C6.92925 1.5 5.25 4.85775 5.25 9C5.25 13.1422 6.92925 16.5 9 16.5C9.2565 16.5 9.50775 16.4482 9.75 16.35" stroke="#1AE7AD" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M11.3955 10.2803L14.256 11.6753L12.861 14.5358" stroke="#1AE7AD" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M14.25 11.6775C12.897 12.3412 11.0445 12.75 9 12.75C4.85775 12.75 1.5 11.0707 1.5 9C1.5 6.92925 4.85775 5.25 9 5.25C12.6285 5.25 15.6547 6.5385 16.35 8.25" stroke="#1AE7AD" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </g>
                  <defs>
                    <clipPath id="clip0_11_438">
                      <rect width="18" height="18" fill="white"/>
                    </clipPath>
                  </defs>
                </svg>
              </button>
            </div>
            <div class="hint">
              Must match the channel name in your MCP server configuration
            </div>
          </div>
        </div>

        <!-- WebSocket Server URL - Second -->
        <div class="input-group">
          <label for="socket-url">WebSocket Server URL</label>
          <div class="input-wrapper">
            <input
              type="text"
              id="socket-url"
              placeholder="wss://relay-production-bcbf.up.railway.app"
              value=""
              inputmode="url"
            />
            <div class="hint">
              Use secure <code>wss://</code> URLs for hosted deployments
            </div>
          </div>
        </div>

        <!-- Auth Token - Third -->
        <div class="input-group">
          <label for="auth-token">Auth Token</label>
          <div class="input-wrapper">
            <input
              type="password"
              id="auth-token"
              placeholder="•••••••••"
              value=""
            />
            <div class="hint">
              Leave empty if authentication is not required
            </div>
          </div>
        </div>

        <!-- Progress Bar -->
        <div id="progress-container" class="progress-container hidden">
          <div id="progress-message">Operation in progress</div>
          <div class="progress-bar-wrapper">
            <div id="progress-bar" class="progress-bar"></div>
          </div>
          <div class="progress-info">
            <div id="progress-status">Not started</div>
            <div id="progress-percentage">0%</div>
          </div>
        </div>
      </div>

      <!-- How to Use -->
      <div class="divider"></div>
      <div class="section how-to-use">
        <h2>how to use</h2>
        <div class="how-to-use-content">
          <ol>
            <li>Start the Tom to Figma MCP server</li>
            <li>Connect to the relay using WebSocket URL (wss://)</li>
            <li>Interact with Figma through Tom to Figma MCP</li>
          </ol>
          <div class="how-to-use-info">
            <span>Tom to Figma MCP server to communicate with Figma. </span>
            <a class="project-link" onclick="window.open('https://github.com/grab/tom-talk-to-figma-mcp', '_blank')">Github</a><br/>
            <span>Version: 1.0.0</span>
          </div>
        </div>
      </div>

      <div class="divider"></div>
      <div class="footer">
        <div class="footer-date">OCTOBER 2025</div>
        <svg class="footer-logo" width="65" height="14" viewBox="0 0 65 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M4.55139 3.21885C5.92827 3.21885 6.97369 3.59378 7.68763 4.34354C8.4143 5.08038 8.77763 6.12095 8.77764 7.46533V13.7673H6.98011L6.92454 12.1072C6.80993 12.3645 6.65 12.6012 6.44464 12.8172C6.10042 13.1791 5.66691 13.47 5.1442 13.6898C4.63426 13.8966 4.07964 14 3.48046 14C2.42234 14 1.57457 13.7543 0.937139 13.2631C0.312442 12.7719 0 12.0803 0 11.1883C4.86705e-06 10.2964 0.261395 9.60484 0.78406 9.11362C1.31951 8.60947 2.14189 8.24749 3.25105 8.02773L6.75059 7.34903C6.75059 6.54755 6.56576 5.9529 6.19605 5.56509C5.82633 5.16435 5.27807 4.96399 4.55139 4.96399C3.90121 4.96399 3.39125 5.11266 3.02154 5.40998C2.65182 5.69437 2.3969 6.12099 2.25666 6.68978L0.172162 6.55402C0.363396 5.51986 0.835122 4.70547 1.58731 4.11082C2.35224 3.51619 3.34026 3.21886 4.55139 3.21885ZM3.76733 9.482C3.15541 9.59834 2.72197 9.78576 2.46699 10.0443C2.22477 10.2899 2.10359 10.6066 2.10358 10.9944C2.10358 11.4339 2.25021 11.7765 2.54342 12.0221C2.8494 12.2548 3.27015 12.3712 3.8056 12.3712C4.41754 12.3712 4.94025 12.2548 5.37372 12.0221C5.80718 11.7765 6.14506 11.4405 6.38729 11.0139C6.62952 10.5873 6.75059 10.1024 6.75059 9.5595V8.90025L3.76733 9.482Z" fill="white"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M21.128 3.21885C22.0459 3.21886 22.8554 3.4386 23.5566 3.8781C24.2578 4.3047 24.7996 4.92525 25.1821 5.73965C25.5773 6.55405 25.7749 7.53649 25.7749 8.68698V9.21047H18.4698C18.5208 10.2188 18.7821 10.975 19.2538 11.4792C19.7383 11.9834 20.3885 12.2354 21.2044 12.2354C21.8036 12.2354 22.3009 12.0933 22.6961 11.8089C23.0913 11.5245 23.3654 11.1431 23.5183 10.6648L25.6219 10.8005C25.3542 11.7571 24.8251 12.5327 24.0347 13.1274C23.257 13.7091 22.3072 14 21.1853 14C20.1909 14 19.3303 13.7803 18.6037 13.3408C17.8897 12.9012 17.3351 12.2742 16.9399 11.4599C16.5574 10.6455 16.3663 9.69524 16.3663 8.60937C16.3663 7.52352 16.5574 6.57982 16.9399 5.77835C17.3351 4.96397 17.8897 4.33707 18.6037 3.89756C19.3176 3.44511 20.1591 3.21885 21.128 3.21885ZM21.128 4.96399C20.4013 4.96399 19.8021 5.19668 19.3304 5.66204C18.8714 6.11449 18.5845 6.78023 18.4698 7.65925H23.6332C23.5694 6.74145 23.308 6.06275 22.8491 5.62324C22.4029 5.18373 21.8292 4.964 21.128 4.96399Z" fill="white"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M46.6183 3.21885C47.9952 3.21885 49.0406 3.59378 49.7546 4.34354C50.4813 5.08038 50.8447 6.12095 50.8447 7.46533V13.7673H49.0471L48.9915 12.1072C48.8769 12.3645 48.717 12.6012 48.5116 12.8172C48.1674 13.1791 47.7339 13.47 47.2112 13.6898C46.7012 13.8966 46.1467 14 45.5475 14C44.4894 14 43.6415 13.7544 43.0041 13.2631C42.3794 12.7719 42.0671 12.0803 42.0671 11.1883C42.0671 10.2964 42.3284 9.60484 42.8511 9.11362C43.3866 8.60947 44.2088 8.24749 45.318 8.02773L48.8175 7.34903C48.8175 6.54755 48.6327 5.9529 48.263 5.56509C47.8933 5.16435 47.345 4.96399 46.6183 4.96399C45.9682 4.964 45.4582 5.11266 45.0885 5.40998C44.7188 5.69437 44.4639 6.12099 44.3236 6.68978L42.2391 6.55402C42.4303 5.51986 42.9021 4.70547 43.6543 4.11082C44.4192 3.51619 45.4072 3.21886 46.6183 3.21885ZM45.8343 9.482C45.2224 9.59834 44.7889 9.78576 44.5339 10.0443C44.2917 10.2899 44.1705 10.6066 44.1705 10.9944C44.1705 11.4339 44.3172 11.7765 44.6104 12.0221C44.9163 12.2548 45.3371 12.3712 45.8725 12.3712C46.4845 12.3712 47.0072 12.2548 47.4407 12.0221C47.8741 11.7765 48.212 11.4405 48.4542 11.0139C48.6965 10.5873 48.8175 10.1024 48.8175 9.5595V8.90025L45.8343 9.482Z" fill="white"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M54.0292 4.90584C54.2969 4.45339 54.6921 4.05909 55.2148 3.72299C55.7502 3.3869 56.3686 3.21885 57.0698 3.21885C57.9494 3.21886 58.7144 3.43859 59.3646 3.8781C60.0148 4.31762 60.512 4.94461 60.8562 5.759C61.2132 6.56047 61.3916 7.5106 61.3917 8.60937C61.3917 9.70817 61.2132 10.6648 60.8562 11.4792C60.512 12.2807 60.0148 12.9012 59.3646 13.3408C58.7144 13.7803 57.9494 14 57.0698 14C56.3686 14 55.7439 13.8448 55.1957 13.5346C54.6603 13.2114 54.2458 12.7719 53.9526 12.2161L53.8953 13.7673H52.002V0H54.0292V4.90584ZM56.7637 5.00279C56.19 5.0028 55.6992 5.14494 55.2912 5.42932C54.8833 5.71371 54.5709 6.1274 54.3542 6.67032C54.1375 7.20032 54.0292 7.8467 54.0292 8.60937C54.0292 9.34621 54.1375 9.98615 54.3542 10.5291C54.5709 11.072 54.8833 11.4921 55.2912 11.7894C55.6992 12.0738 56.1837 12.2161 56.7446 12.2161C57.5223 12.2161 58.1407 11.8994 58.5996 11.2659C59.0586 10.6196 59.2881 9.73402 59.2881 8.60937C59.2881 7.48474 59.0586 6.60568 58.5996 5.97227C58.1407 5.32593 57.5287 5.00279 56.7637 5.00279Z" fill="white"/>
          <path d="M12.1725 13.7673H10.1455V0H12.1725V13.7673Z" fill="white"/>
          <path d="M15.629 13.7673H13.6018V0H15.629V13.7673Z" fill="white"/>
          <path d="M31.2903 3.21885C32.0552 3.21886 32.6862 3.39342 33.1834 3.74245C33.6934 4.07855 34.0759 4.54391 34.3309 5.13856C34.5986 5.72026 34.7325 6.38602 34.7325 7.13576V13.7673H32.7054V7.75621C32.7054 7.14865 32.6417 6.638 32.5142 6.22434C32.3867 5.81069 32.1763 5.49397 31.8831 5.27421C31.5899 5.05445 31.2073 4.94464 30.7356 4.94464C30.0217 4.94465 29.4416 5.18376 28.9954 5.66204C28.5492 6.14034 28.3261 6.8384 28.3261 7.75621V13.7673H26.299V3.45157H28.154L28.2033 5.22818C28.3162 4.92753 28.4592 4.665 28.6321 4.4405C28.9509 4.02684 29.3396 3.72298 29.7986 3.52908C30.2575 3.32224 30.7548 3.21885 31.2903 3.21885Z" fill="white"/>
          <path d="M41.4254 13.7673H39.3982V0H41.4254V13.7673Z" fill="white"/>
          <path d="M61.9931 0.641496C61.8082 0.827455 61.6221 1.01226 61.436 1.19698C61.6408 1.47964 61.8432 1.7586 62.048 2.03877C62.0418 2.03877 62.038 2.03994 62.0343 2.03994H61.7495C61.7408 2.03994 61.7345 2.03626 61.7295 2.03006C61.5734 1.81435 61.4161 1.59981 61.26 1.3841C61.2575 1.38038 61.2549 1.37668 61.2486 1.37049C61.2449 1.37544 61.2437 1.37921 61.2399 1.38293C61.18 1.44242 61.1213 1.5019 61.0614 1.56015C61.0539 1.56759 61.0514 1.57383 61.0514 1.58375V2.03877H60.8028V0.642771H61.0514V1.28246C61.0551 1.28001 61.0564 1.27997 61.0576 1.27874C61.1613 1.17337 61.2662 1.06804 61.3698 0.962669C61.4585 0.873411 61.5459 0.784123 61.6346 0.694865C61.6496 0.678749 61.6658 0.663884 61.6808 0.647768C61.6846 0.644049 61.6896 0.641496 61.6933 0.641496H61.9931Z" fill="white"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M63.6401 0.604392C63.7388 0.604393 63.8387 0.608089 63.9361 0.629163C63.9961 0.641561 64.0523 0.66385 64.1009 0.701031C64.1609 0.744422 64.1997 0.802701 64.2209 0.873365C64.2434 0.947747 64.247 1.02462 64.2358 1.10024C64.222 1.19322 64.1709 1.26261 64.0972 1.31839C64.0447 1.35806 63.9836 1.37669 63.9211 1.38909C63.9099 1.39157 63.8999 1.39278 63.8886 1.39526C63.9136 1.40146 63.9374 1.40526 63.9611 1.41269C64.0335 1.43501 64.0897 1.4784 64.1297 1.5441C64.1646 1.60112 64.1934 1.65938 64.2009 1.72632C64.2034 1.74243 64.2034 1.75858 64.2034 1.77469C64.2034 1.8441 64.2021 1.91355 64.2046 1.98296C64.2046 2.00897 64.2121 2.03498 64.2159 2.06099C64.2171 2.06595 64.2221 2.06975 64.2258 2.07471C64.1447 2.07595 64.0623 2.07588 63.9798 2.07588V1.86272C63.9786 1.80197 63.9698 1.74242 63.9486 1.68539C63.9124 1.59241 63.8449 1.53658 63.7462 1.51922C63.6888 1.50931 63.6301 1.50689 63.5715 1.50689H63.3579C63.3541 1.50689 63.3504 1.50693 63.3454 1.50816V2.08832H63.0843V0.604392H63.0981C63.2792 0.604392 63.459 0.603153 63.6401 0.604392ZM63.3678 0.789059C63.3641 0.789059 63.3604 0.789097 63.3566 0.790335V1.32095C63.3591 1.32095 63.3616 1.3221 63.3641 1.32211C63.4602 1.32211 63.5552 1.32342 63.6514 1.32095C63.7225 1.31971 63.7924 1.30972 63.8574 1.27874C63.9211 1.24899 63.9649 1.20317 63.9811 1.135C63.9936 1.08295 63.9947 1.02961 63.9835 0.977553C63.9648 0.890788 63.9136 0.834984 63.8262 0.81266C63.7651 0.797785 63.7026 0.791575 63.6401 0.790335C63.549 0.789095 63.459 0.789059 63.3678 0.789059Z" fill="white"/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M63.6002 0.010525C63.6851 0.010525 63.77 0.0142178 63.855 0.0278541C63.9774 0.0476898 64.0948 0.0824539 64.2072 0.135762C64.3395 0.197748 64.457 0.280789 64.5631 0.379964C64.6967 0.50393 64.8016 0.648996 64.8778 0.815106C64.9802 1.03949 65.0189 1.27504 64.9914 1.5205C64.9752 1.66801 64.9327 1.80811 64.8678 1.94075C64.7804 2.12175 64.658 2.27552 64.5019 2.40322C64.3083 2.55942 64.0898 2.65732 63.8425 2.69452C63.82 2.69699 63.7963 2.70075 63.7726 2.70323H61.1824C61.1624 2.70075 61.1424 2.69823 61.1224 2.69452C60.9663 2.6722 60.8177 2.62515 60.6778 2.55078C60.4118 2.40821 60.212 2.20237 60.0833 1.93087C59.9647 1.68168 59.9285 1.42007 59.9709 1.14734C60.0009 0.953952 60.0721 0.776674 60.1808 0.614279C60.3194 0.408484 60.5005 0.25223 60.7241 0.144374C60.9089 0.0551288 61.1037 0.0105266 61.3085 0.010525H63.6002ZM61.3047 0.211351C61.2273 0.211354 61.1499 0.220012 61.0737 0.236122C60.8352 0.288191 60.6316 0.403511 60.4655 0.580791C60.2994 0.758072 60.1982 0.967603 60.1645 1.20687C60.1458 1.34198 60.1508 1.4771 60.182 1.61097C60.2395 1.8589 60.3656 2.06721 60.5604 2.23333C60.774 2.41433 61.0213 2.51105 61.3023 2.51229C61.8418 2.51477 62.3813 2.51357 62.9208 2.51357C62.9245 2.50985 62.9296 2.50985 62.9334 2.50985V2.5073C62.9321 2.50606 62.9308 2.50486 62.9296 2.50485C62.8172 2.43667 62.7172 2.35239 62.6286 2.25693C62.5124 2.13172 62.4238 1.99032 62.3663 1.8304C62.3164 1.69404 62.2914 1.55273 62.2864 1.4077C62.2814 1.26265 62.2951 1.12008 62.3351 0.979998C62.3988 0.758086 62.5174 0.56962 62.6761 0.404736C62.7447 0.332842 62.8246 0.274541 62.9083 0.221238C62.912 0.218759 62.9159 0.216276 62.9196 0.213796C62.9196 0.2126 62.9184 0.212576 62.9184 0.211351H61.3047ZM63.549 0.208906C63.5141 0.208906 63.4778 0.206392 63.4428 0.211351C63.3679 0.22127 63.2955 0.241138 63.2256 0.267166C63.057 0.330392 62.9121 0.427122 62.7859 0.553574C62.7123 0.627951 62.6523 0.712215 62.6023 0.803943C62.5174 0.961384 62.4774 1.13123 62.4724 1.30851C62.4687 1.44858 62.4849 1.58496 62.5286 1.7176C62.5898 1.9048 62.6947 2.06602 62.8371 2.20239C62.9283 2.29041 63.0332 2.36111 63.1493 2.41193C63.3704 2.50863 63.6002 2.53339 63.8375 2.49124C64.0947 2.44538 64.3108 2.32388 64.4869 2.13297C64.6592 1.94577 64.7592 1.7263 64.7854 1.4734C64.7979 1.35439 64.7916 1.23537 64.7654 1.11884C64.7104 0.87462 64.5893 0.668772 64.402 0.50265C64.2534 0.370021 64.0823 0.282027 63.8875 0.237398C63.7851 0.215086 63.6827 0.206429 63.579 0.208906H63.549Z" fill="white"/>
        </svg>
      </div>
    </div>

    <script>
      const DEFAULT_SOCKET_URL =
        window.DEFAULT_SOCKET_URL || "wss://relay-production-bcbf.up.railway.app";
      const DEFAULT_CHANNEL = "default";

      // WebSocket connection state
      const state = {
        connected: false,
        socket: null,
        serverUrl: DEFAULT_SOCKET_URL,
        authToken: "",
        channelName: DEFAULT_CHANNEL,
        pendingRequests: new Map(),
        channel: null,
      };

      // UI Elements
      const socketInput = document.getElementById("socket-url");
      const authTokenInput = document.getElementById("auth-token");
      const channelNameInput = document.getElementById("channel-name");
      const generateChannelButton = document.getElementById("btn-generate-channel");
      const connectButton = document.getElementById("btn-connect");
      const disconnectButton = document.getElementById("btn-disconnect");
      const statusBadge = document.getElementById("status-badge");
      const statusText = document.getElementById("status-text");
      const statusIconOffline = document.getElementById("status-icon-offline");
      const statusIconOnline = document.getElementById("status-icon-online");
      const progressContainer = document.getElementById("progress-container");
      const progressBar = document.getElementById("progress-bar");
      const progressMessage = document.getElementById("progress-message");
      const progressStatus = document.getElementById("progress-status");
      const progressPercentage = document.getElementById("progress-percentage");

      if (socketInput) {
        socketInput.value = state.serverUrl;
      }
      if (channelNameInput) {
        channelNameInput.value = state.channelName;
      }

      // Initialize UI
      function updateConnectionStatus(isConnected, message) {
        state.connected = isConnected;

        // Update status badge
        if (statusBadge) {
          if (isConnected) {
            statusBadge.classList.add('connected');
          } else {
            statusBadge.classList.remove('connected');
          }
        }

        // Update status text
        if (statusText) {
          statusText.textContent = isConnected ? 'online' : 'offline';
        }

        // Toggle status icons
        if (statusIconOffline && statusIconOnline) {
          if (isConnected) {
            statusIconOffline.classList.add('hidden');
            statusIconOnline.classList.remove('hidden');
          } else {
            statusIconOffline.classList.remove('hidden');
            statusIconOnline.classList.add('hidden');
          }
        }

        // Update buttons
        if (connectButton && disconnectButton) {
          if (isConnected) {
            connectButton.classList.add('hidden');
            disconnectButton.classList.remove('hidden');
            disconnectButton.disabled = false;
          } else {
            connectButton.classList.remove('hidden');
            disconnectButton.classList.add('hidden');
            connectButton.disabled = false;
          }
        }

        // Disable inputs when connected
        if (socketInput) {
          socketInput.disabled = isConnected;
        }
        if (authTokenInput) {
          authTokenInput.disabled = isConnected;
        }
        if (channelNameInput) {
          channelNameInput.disabled = isConnected;
        }
        if (generateChannelButton) {
          generateChannelButton.disabled = isConnected;
        }
      }

      function normalizeSocketUrl(rawValue) {
        if (!rawValue) {
          return DEFAULT_SOCKET_URL;
        }

        const trimmed = rawValue.trim();
        if (!trimmed) {
          return DEFAULT_SOCKET_URL;
        }

        if (trimmed.startsWith("ws://") || trimmed.startsWith("wss://")) {
          return trimmed;
        }

        if (trimmed.startsWith("https://")) {
          return `wss://${trimmed.slice("https://".length)}`;
        }

        if (trimmed.startsWith("http://")) {
          return `ws://${trimmed.slice("http://".length)}`;
        }

        if (/^\d+$/.test(trimmed)) {
          return `ws://127.0.0.1:${trimmed}`;
        }

        if (!trimmed.includes("://")) {
          return `ws://${trimmed}`;
        }

        return trimmed;
      }

      // Connect to WebSocket server
      async function connectToServer(socketUrl) {
        try {
          if (state.connected && state.socket) {
            updateConnectionStatus(true, "Already connected to server");
            return;
          }

          const normalizedUrl = normalizeSocketUrl(socketUrl || state.serverUrl);
          state.serverUrl = normalizedUrl;
          state.authToken = authTokenInput ? authTokenInput.value.trim() : "";
          state.channelName = channelNameInput ? channelNameInput.value.trim() : DEFAULT_CHANNEL;

          // Use default channel if empty
          if (!state.channelName) {
            state.channelName = DEFAULT_CHANNEL;
            if (channelNameInput) {
              channelNameInput.value = DEFAULT_CHANNEL;
            }
          }

          parent.postMessage(
            {
              pluginMessage: {
                type: "update-settings",
                socketUrl: state.serverUrl,
                authToken: state.authToken,
                channelName: state.channelName,
              },
            },
            "*"
          );

          // Create WebSocket URL with auth token if provided
          let wsUrl = normalizedUrl;
          if (state.authToken) {
            // Add token as query parameter since browser WebSocket doesn't support custom headers
            const urlObj = new URL(normalizedUrl);
            urlObj.searchParams.set('token', state.authToken);
            wsUrl = urlObj.toString();
          }

          state.socket = new WebSocket(wsUrl);

          state.socket.onopen = () => {
            // Use configured channel name instead of generating random
            const channelName = state.channelName;
            console.log("Joining channel:", channelName);
            state.channel = channelName;

            // Join the channel
            state.socket.send(
              JSON.stringify({
                type: "join",
                channel: channelName.trim(),
              })
            );
          };

          state.socket.onmessage = (event) => {
            try {
              const data = JSON.parse(event.data);
              console.log("Received message:", data);

              if (data.type === "system") {
                // Successfully joined channel
                if (data.message && data.message.result) {
                  state.connected = true;
                  const channelName = data.channel;
                  updateConnectionStatus(true);

                  // Notify the plugin code
                  parent.postMessage(
                    {
                      pluginMessage: {
                        type: "notify",
                        message: `Connected to Tom to Figma MCP server at ${state.serverUrl} in channel: ${channelName}`,
                      },
                    },
                    "*"
                  );
                }
              } else if (data.type === "error") {
                console.error("Error:", data.message);
                updateConnectionStatus(false);
                state.socket.close();
              }

              handleSocketMessage(data);
            } catch (error) {
              console.error("Error parsing message:", error);
            }
          };

          state.socket.onclose = () => {
            state.connected = false;
            state.socket = null;
            updateConnectionStatus(false);
          };

          state.socket.onerror = (error) => {
            console.error("WebSocket error:", error);
            updateConnectionStatus(false);
            state.connected = false;
            state.socket = null;
          };
        } catch (error) {
          console.error("Connection error:", error);
          updateConnectionStatus(false);
        }
      }

      // Disconnect from websocket server
      function disconnectFromServer() {
        if (state.socket) {
          state.socket.close();
          state.socket = null;
          state.connected = false;
          updateConnectionStatus(false);
        }
      }

      // Handle messages from the WebSocket
      async function handleSocketMessage(payload) {
        const data = payload.message;
        console.log("handleSocketMessage", data);

        // If it's a response to a previous request
        if (data.id && state.pendingRequests.has(data.id)) {
          const { resolve, reject } = state.pendingRequests.get(data.id);
          state.pendingRequests.delete(data.id);

          if (data.error) {
            reject(new Error(data.error));
          } else {
            resolve(data.result);
          }
          return;
        }

        // If it's a new command
        if (data.command) {
          try {
            // Send the command to the plugin code
            parent.postMessage(
              {
                pluginMessage: {
                  type: "execute-command",
                  id: data.id,
                  command: data.command,
                  params: data.params,
                },
              },
              "*"
            );
          } catch (error) {
            // Send error back to WebSocket
            sendErrorResponse(
              data.id,
              error.message || "Error executing command"
            );
          }
        }
      }

      // Send success response back to WebSocket
      function sendSuccessResponse(id, result) {
        if (!state.connected || !state.socket) {
          console.error("Cannot send response: socket not connected");
          return;
        }

        state.socket.send(
          JSON.stringify({
            id,
            type: "message",
            channel: state.channel,
            message: {
              id,
              result,
            },
          })
        );
      }

      // Send error response back to WebSocket
      function sendErrorResponse(id, errorMessage) {
        if (!state.connected || !state.socket) {
          console.error("Cannot send error response: socket not connected");
          return;
        }

        state.socket.send(
          JSON.stringify({
            id,
            type: "message",
            channel: state.channel,
            message: {
              id,
              error: errorMessage,
              result: {}
            },
          })
        );
      }

      // Helper to generate unique IDs
      function generateId() {
        return (
          Date.now().toString(36) + Math.random().toString(36).substr(2, 5)
        );
      }

      // Generate channel name
      function generateChannelName() {
        const characters = "abcdefghijklmnopqrstuvwxyz0123456789";
        let result = "";
        for (let i = 0; i < 8; i++) {
          result += characters.charAt(
            Math.floor(Math.random() * characters.length)
          );
        }
        return result;
      }

      // Function to update progress UI
      function updateProgressUI(progressData) {
        progressContainer.classList.remove("hidden");

        const progress = progressData.progress || 0;
        progressBar.style.width = `${progress}%`;
        progressPercentage.textContent = `${progress}%`;

        progressMessage.textContent = progressData.message || "Operation in progress";

        if (progressData.status === 'started') {
          progressStatus.textContent = "Started";
          progressStatus.className = "";
        } else if (progressData.status === 'in_progress') {
          progressStatus.textContent = "In Progress";
          progressStatus.className = "";
        } else if (progressData.status === 'completed') {
          progressStatus.textContent = "Completed";
          progressStatus.className = "operation-complete";

          setTimeout(() => {
            progressContainer.classList.add("hidden");
          }, 5000);
        } else if (progressData.status === 'error') {
          progressStatus.textContent = "Error";
          progressStatus.className = "operation-error";
        }
      }

      // Send operation progress update to server
      function sendProgressUpdateToServer(progressData) {
        if (!state.connected || !state.socket) {
          console.error("Cannot send progress update: socket not connected");
          return;
        }

        console.log("Sending progress update to server:", progressData);

        state.socket.send(
          JSON.stringify({
            id: progressData.commandId,
            type: "progress_update",
            channel: state.channel,
            message: {
              id: progressData.commandId,
              type: "progress_update",
              data: progressData
            }
          })
        );
      }

      // Connect button
      connectButton.addEventListener("click", () => {
        const rawValue = socketInput ? socketInput.value : state.serverUrl;
        const normalizedUrl = normalizeSocketUrl(rawValue);
        if (socketInput) {
          socketInput.value = normalizedUrl;
        }

        connectToServer(normalizedUrl);
      });

      // Disconnect button
      disconnectButton.addEventListener("click", () => {
        disconnectFromServer();
      });

      // Generate channel button
      if (generateChannelButton) {
        generateChannelButton.addEventListener("click", () => {
          const newChannel = generateChannelName();
          if (channelNameInput) {
            channelNameInput.value = newChannel;
          }
          state.channelName = newChannel;
        });
      }

      // Listen for messages from the plugin code
      window.onmessage = (event) => {
        const message = event.data.pluginMessage;
        if (!message) return;

        console.log("Received message from plugin:", message);

        switch (message.type) {
          case "connection-status":
            updateConnectionStatus(message.connected);
            break;
          case "init-settings":
            if (message.settings && message.settings.socketUrl) {
              state.serverUrl = message.settings.socketUrl;
            } else {
              state.serverUrl = DEFAULT_SOCKET_URL;
            }
            if (message.settings && message.settings.authToken) {
              state.authToken = message.settings.authToken;
            }
            if (message.settings && message.settings.channelName) {
              state.channelName = message.settings.channelName;
            } else {
              state.channelName = DEFAULT_CHANNEL;
            }
            if (socketInput) {
              socketInput.value = state.serverUrl;
            }
            if (authTokenInput && state.authToken) {
              authTokenInput.value = state.authToken;
            }
            if (channelNameInput) {
              channelNameInput.value = state.channelName;
            }
            break;
          case "auto-connect":
            connectToServer(state.serverUrl);
            break;
          case "auto-disconnect":
            disconnectButton.click();
            break;
          case "command-result":
            sendSuccessResponse(message.id, message.result);
            break;
          case "command-error":
            sendErrorResponse(message.id, message.error);
            break;
          case "command_progress":
            updateProgressUI(message);
            sendProgressUpdateToServer(message);
            break;
        }
      };
    </script>
  </body>
</html>
